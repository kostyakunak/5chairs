# 5 Chairs - Улучшения Telegram-бота для управления встречами

## Описание проекта

"5 Chairs" - это Telegram-бот для управления заявками на участие в мероприятиях и встречах. Бот использует двухслойную модерацию:
1. Админ создаёт доступные временные слоты для разных городов
2. Пользователь выбирает из предложенных вариантов подходящие для него временные слоты
3. Админ рассматривает заявки пользователей и распределяет их по конкретным встречам

## Правильное понимание логики сервиса

Важно понимать, что:
- Только админ может создавать временные слоты и мероприятия
- Пользователь НЕ СОЗДАЁТ событий, а лишь выбирает из доступных вариантов, которые ему подходят
- Пользователь отправляет заявку с указанием всех подходящих ему временных слотов
- Админ сам решает, на какую конкретную встречу определить пользователя

## Текущие проблемы

1. Проблема с ID событий - когда `event_id` равен 0 в выбранных временных слотах, что вызывает ошибки в функции `show_multi_slot_confirmation`.

2. Несоответствие таблиц - одновременное использование устаревшей таблицы `timeslots` и новой таблицы `time_slots`, что создаёт путаницу и ошибки.

3. Неудобный интерфейс выбора временных слотов - текущий механизм выбора нескольких дат и временных слотов запутанный и неинтуитивный для пользователей.

4. Малоинформативные сообщения об ошибках, затрудняющие диагностику проблем как для пользователей, так и для администраторов.

## Требуемые улучшения

### Проблема с ID событий
- Исправить обработку случаев, когда `event_id` равен 0 в выбранных временных слотах
- Модифицировать функцию `show_multi_slot_confirmation` для корректной обработки неназначенных событий

### Устранение несоответствия таблиц
- Завершить миграцию с `timeslots` на `time_slots`
- Обновить все запросы для работы только с актуальной таблицей
- Удалить устаревшую таблицу после миграции

### Улучшение пользовательского интерфейса
- Переработать механизм выбора дат и временных слотов, сделав его более понятным
- Обеспечить четкое отображение уже выбранных пользователем временных слотов
- Упростить процесс отмены выбора или изменения решения

### Улучшение обработки ошибок
- Добавить понятные сообщения пользователю при возникновении ошибок
- Улучшить систему логирования для быстрой диагностики проблем

### Стабильность работы с БД
- Добавить проверки перед выполнением критических операций
- Улучшить обработку ошибок при работе с базой данных

## Документация по логике работы

Необходимо создать подробную текстовую документацию, которая будет ясно описывать:
- Порядок работы пользовательского бота (все шаги от начала использования до подачи заявки)
- Порядок работы бота для администраторов (создание временных слотов, рассмотрение заявок, организация встреч)
- Взаимодействие между действиями пользователя и администратора
- Жизненный цикл заявки от создания до включения в конкретную встречу

Документация должна быть написана простым языком, понятным обычному человеку без технических знаний, с примерами и описанием типичных сценариев использования.

## Ожидаемые результаты

После выполнения всех необходимых улучшений:
1. Пользователи смогут без ошибок выбирать подходящие временные слоты и подавать заявки
2. База данных будет использовать единую структуру для временных слотов
3. Интерфейс станет более понятным и удобным для пользователей
4. Сообщения об ошибках станут более информативными
5. Вся логика работы сервиса будет чётко задокументирована и понятна всем участникам процесса

## Технические требования

Все изменения должны быть выполнены без усложнения существующей архитектуры. Фокус должен быть на исправлении существующих проблем и улучшении пользовательского опыта. 