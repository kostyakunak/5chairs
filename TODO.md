# TODO: Рекомендации по улучшению системы 5 Chairs

## Create Meeting & Smart Meeting Creation — Детализированный план

### 1. Унификация и улучшение интерфейса создания встречи (Create Meeting)
#### 1.1. UI/UX
- [ ] Реализовать пошаговый интерфейс:
    - [ ] Экран выбора города
    - [ ] Экран выбора недели (текущая/следующая)
    - [ ] Экран выбора дня недели (отображение дней на основе timeslot)
    - [ ] Экран выбора timeslot (все timeslots для города)
    - [ ] Экран выбора площадки (venue)
    - [ ] Экран подтверждения всех параметров
- [ ] Сделать UI последовательным, без лишних шагов и возвратов

#### 1.2. Логика и интеграция
- [ ] Обеспечить, чтобы timeslots были универсальными шаблонами (не привязаны к датам)
- [ ] Корректно формировать meeting_date и meeting_time на основе выбранных недели, дня и timeslot
- [ ] Интегрировать выбор площадки с существующим справочником venues
- [ ] Сохранять все параметры встречи в базе

#### 1.3. Тестирование
- [ ] Покрыть flow создания встречи unit-тестами
- [ ] Проверить edge-cases (нет timeslots, нет venues, некорректные даты)

### 2. Доработка Smart Meeting Creation
#### 2.1. UI/UX
- [ ] Реализовать аналогичный пошаговый интерфейс:
    - [ ] Выбор города
    - [ ] Выбор недели
    - [ ] Выбор дня недели
    - [ ] Выбор timeslot
    - [ ] Выбор площадки
    - [ ] Экран подтверждения

#### 2.2. Логика и интеграция
- [ ] После выбора всех параметров автоматически подобрать подходящих участников (по заявкам/applications)
- [ ] Исключить дублирование встреч и участников (проверять занятость)
- [ ] Создать встречу сразу с участниками внутри (meeting + meeting_members)
- [ ] Корректно работать с доступными датами и timeslot-ами
- [ ] Обработка ошибок: нет подходящих участников, нет доступных слотов

#### 2.3. Тестирование
- [ ] Покрыть smart creation unit- и интеграционными тестами
- [ ] Проверить сценарии с разными городами, неделями, днями, таймслотами

### 3. Общие задачи по интеграции и рефакторингу
- [ ] Вынести общие компоненты выбора города, недели, дня, timeslot и площадки в отдельные функции/модули
- [ ] Обеспечить повторное использование UI-компонентов между обычным и smart creation
- [ ] Добавить обработку ошибок и edge-cases (нет доступных таймслотов, нет подходящих участников и т.д.)

# ---

## Service Communication
- Внедрить message broker для межсервисного взаимодействия
- Перейти на event-driven архитектуру

## Database Improvements
- Реализовать общий менеджер connection pool для всех сервисов
- Вынести операции с базой в доменные репозитории
- Завершить миграцию легаси-функций

## State Management
- Заменить MemoryStorage на RedisStorage для хранения состояния ботов
- Реализовать персистентность сессий

## Code Organization
- Разбить монолитный db.py на модули
- Вынести бизнес-логику из хендлеров в сервисные классы
- Внедрить dependency injection

## Testing Enhancement
- Завершить реализацию тестов
- Добавить полноценные unit- и интеграционные тесты
- Внедрить автоматическое тестирование критических путей
